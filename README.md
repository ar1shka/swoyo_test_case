# swoyo_test_case

Тестовое задание по python-разработке. CLI-программа, которая является клиентом к условному сервису отправки СМС-сообщений.

Спецификация API сервиса находится в приложенном файле `./configuration/sms-platform.yaml`. В спецификации указан необходимый формат запросов, а также возвращаемые сервисом ответы. Данная спецификация написана в формате OpenAPI, для её визуализации можно воспользоваться онлайн сервисами. 

## Настройка окружения
Для того, чтобы настроить окружение необходимо выполниь команду:
```bash
poetry install
```

## Работа с программой
Необходимо создать файл конфигурации в формате `TOML`. Базовый файл конфигурации лежит по следующему пути `./configuration/config.toml`.  
Запуск программы осуществляется следующим образом:
```bash
poetry run python -m send_sms [-h] --sender SENDER --recipient RECIPIENT --message MESSAGE [--config-file CONFIG_FILE]
```

## Тестирование
Папка `./tests` состоит из файлов, которые тестируют `Request`, `Response` и функцию `send_sms`. Для тестирования функции `send_sms` необходимо развернуть мок-сервер на основе спецификации `./configuration/sms-platform.yaml`, например следующим образом:
```bash
prism mock ./configuration/sms-platform.yaml
```

Запуск всех тестов, осуществляется следующим образом:
```bash
poetry run pytest
```

## Линтеры
В репозитории настроены линтеры `black`, `isort`, `flake8`, `mypy`.  
Файлы конфигурации для линтеров:
* `black` - `./pyproject.toml`
* `isort` - `./pyproject.toml`
* `flake8` - `./.flake8`
* `mypy` - `./mypy.ini`

Для запуска линтеров достаточно запустить скрипт:
```bash
. run_linters.sh
```